<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>cells</title>

  <meta name="viewport" content="width=device-width; initial-scale=1">

  <link href="./css/core.css" rel="stylesheet" />

  <script type="text/javascript" src="./js/jquery.1.7.2.min.js"></script>
  <script type="text/javascript" src="./js/responsive.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript">
    res = null;
    $(document).ready(function() {
      res = new responsive([
        { width: 960, style: 'Wider' },
        { width: 640, style: '960' },
        { width: 481, style: '640' },
        { width: 360, style: '480' },
        { width: 0, style: '360' }
      ]);

      thumbnails = new Cells({
        element: document.getElementById('container'),
      });

      new cellTemplate('image', function(cell) {
        var inner = document.createElement('div');
        inner.className = 'inner';

        if (cell.background !== undefined) {
          $(inner).css('opacity', 0);
          var image = new Image();
          image.onload = function() {
            $(inner).css('background-image', "url('" + this.src + "')").animate({ opacity: 1 }, { duration: 300, queue: false });
          }
          image.src = cell.background;
        }

        return inner;
      });

      /*new cellTemplate('feed', function(cell) {
        var inner = document.createElement('div');
        inner.className = 'inner feed';

        inner.innerHTML = cell.content;

        $(inner).css('opacity', 0).animate({ 'opacity': 1 }, { duration: 300, queue: false });

        return inner;
      });*/

      var locations = [{"id":547,"title":"Cardiff","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Cardiff-Castle.jpg"},{"id":852,"title":"Bletchley Park","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Bletchley%20%28c%29%20Ell%20Brown%20on%20flickr.jpg"},{"id":613,"title":"Clyde Muirshiel Regional Park","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Clyde%20Muirshiel%20-%20by%20easylocum.jpg"},{"id":1029,"title":"Oxford Sreet","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Oxford%20Street.jpg"},{"id":1061,"title":"Changing the Guard","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/21976477.jpg"},{"id":744,"title":"The Holy Island of Lindisfarne","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Lindisfarne.jpg"},{"id":1034,"title":"Eden Sessions","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Eden%20Sessions.jpg"},{"id":991,"title":"Manchester Art Gallery","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/ManchesterMuseum.jpg"},{"id":1165,"title":"Churchill War Rooms","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/ChurchillsWarRoom.jpg"},{"id":565,"title":"Welshpool","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Steam-Train-3---Welshpool.jpg"},{"id":595,"title":"Glens of Antrim ","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Glens-of-Antrim.jpg"},{"id":843,"title":"Shakespeare's Birthplace, Stratford-upon-Avon ","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Anne%20hathaway22.jpg"},{"id":775,"title":"Yorkshire Dales National Park","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Dales.jpg"},{"id":978,"title":"Scotch Whisky Experience","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/21975616.jpg"},{"id":1158,"title":"Royal Arcade Bond Street","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/The%20Arcade.jpg"},{"id":757,"title":"Robin Hood's Bay","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Robin%20Hood%20Bay.jpg"},{"id":1176,"title":"Greatstone Sound Mirrors","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/sound%20mirrors%20resize.jpg"},{"id":881,"title":"Walton on the Naze","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Walton%20on%20the%20Naze%20by%20Wootton%20on%20Flickr.jpg"},{"id":1009,"title":"The Natural History Museum","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/NaturalHistoryMuseum.jpg"},{"id":859,"title":"Norfolk Broads","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/21973808.jpg"},{"id":998,"title":"Beatles Story","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/BeatlesStory.jpg"},{"id":1154,"title":"Bond No. 9","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Cocktail%20-%20stand%20in%20for%20Bond%20No%209%20by%20Richard%20Moross%20on%20Flickr%20resize.jpg"},{"id":1169,"title":"Gateshead Millennium Bridge","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Gateshead%20Bridge.jpg"},{"id":1027,"title":"Fortnum and Mason","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Fortnum-and-mason-VB-images.jpg"},{"id":529,"title":"Bristol","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Bristol-Science-Centre.jpg"},{"id":763,"title":"Hartlepool Maritime Experience","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Hartlepool%20by%20Victoria%20Reay%20on%20Flickr.jpg"},{"id":997,"title":"Shakespeare's Globe","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Shakespeare%20Globe%20Theatre%2C%20London.jpg"},{"id":615,"title":"Glasgow","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Glasgow.jpg"},{"id":989,"title":"Science Museum","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/sciencemuseum.jpg"},{"id":995,"title":"BALTIC","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Baltic.jpg"},{"id":1164,"title":"Kensington Roof Gardens","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/KensingtonRoofGardens_spanish.jpg"},{"id":1036,"title":"Notting Hill Carnival","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Notting%20Hill%20Carnival%2C%20West%20London%2C%20London.jpg"},{"id":794,"title":"Peak District National Park","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/21969226.jpg"},{"id":1067,"title":"Castle Howard","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/21964579.jpg"},{"id":745,"title":"Bamburgh Castle","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Bamburgh.jpg"},{"id":968,"title":"Whitstable Oyster Festival","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Whitstable.jpg"},{"id":1109,"title":"Natural History Museum at Tring","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Tring%20museum.jpg"},{"id":816,"title":"The Peak District National Park","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/PEAK%20DISTRICT.jpg"},{"id":927,"title":"Guernsey","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/21961741_0.jpg"},{"id":709,"title":"Ben Nevis and the Nevis Range gondola","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Ben%20Nevis%201_0.jpg"},{"id":1004,"title":"The London Eye","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/London%20Skyline%20London%20Eye%2C%20London.jpg"},{"id":1049,"title":"Palace of Holyroodhouse","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/holyrood%20by%20Puptoes74%20on%20Flikr.jpg"},{"id":571,"title":"Stoke-On-Trent","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Potteries-Museum_0.jpg"},{"id":1203,"title":"Riverside Museum","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Riverside%20museum%20by%20alex%20liivet.jpg"},{"id":753,"title":"North York Moors National Park","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/North%20York%20Moors.jpg"},{"id":862,"title":"Henley-on-Thames","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Henley%20by%20rowfotos%20on%20flickr.jpg"},{"id":764,"title":"Captain Cook Birthplace Museum","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Captain%20Cook%20by%20a.meins%20on%20Flickr.jpg"},{"id":597,"title":"Bangor","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Bangor.jpg"},{"id":922,"title":"Carisbrooke Castle","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Carisbrooke%20Castle%20by%20Martyn%20Wright%20on%20Flickr.jpg"},{"id":931,"title":"Arundel Castle","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/21967456.jpg"},{"id":1050,"title":"Trooping the Colour","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/25556432.jpg"},{"id":990,"title":"York Castle Museum","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/YorkMuseum.jpg"},{"id":738,"title":"Stirling","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/stirling.jpg"},{"id":1181,"title":"Cliveden House","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Cliveden%20House.jpg"},{"id":602,"title":"Walls of Londonderry/Derry","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Outside-Derry%27s-walls.jpg"},{"id":731,"title":"Glamis Castle","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Glamis%20Castle_0.jpg"},{"id":574,"title":"Great Orme Tramway","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Great-Orme-Tramway2.jpg"},{"id":762,"title":"Auckland Castle","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Auckland%20Castle.jpg"},{"id":1183,"title":"Hotel Tresanton","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/HotelTresanton2.jpg"},{"id":958,"title":"Belfast","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/belfast.jpg"},{"id":1201,"title":"National Gallery of Scotland","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/21960748.jpg"},{"id":986,"title":"Tower Bridge","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Tower%20Bridge.jpg"},{"id":801,"title":"Magna","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/location_images/Magna%20by%20Lizjones112%20on%20Flickr.jpg"},{"id":1175,"title":"Brimham Rocks","image":"http://lovewall.visitbritain.com/cms/sites/default/files/imagecache/main_group_images/Brimham%20rocks%20credit.jpg"}] ;

      var i = locations.length;
      while(i--) {
        var location = locations[i];
        var val = Math.random() * 15;
        if (val > 13) {
          val = 4;
        } else if (val > 11) {
          val = 3;
        } else if (val > 9) {
          val = 2;
        } else {
          val = 1;
        }
        thumbnails.add(new cell({
          id: location.nid,
          title: location.title,
          template: 'image',
          background: location.image,
          rel: Math.floor(Math.random() * 32),
          val: val
        }));
      }

      thumbnails.sort();

      res.change(function() {
        switch(this.state) {
          case '360':
            thumbnails.resize(3, 106);
            break;
          case '480':
          case '640':
            thumbnails.resize(null, 120);
            break;
          case '960':
            thumbnails.resize(null, 128);
            break;
          default:
            thumbnails.resize(null, 160);
            break;
        }
      });

      res.resize(function() {
        $('#container').css('width', '');
        var cols = Math.floor($('#container').width() / thumbnails.cellSize);
        $('#container').css('width', cols * thumbnails.cellSize);
        thumbnails.resize(cols);
      })
    });
  </script>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36635429-1']);
    _gaq.push(['_trackPageview']);
  </script>
</head>
<body>
  <div id='container'></div>
  <script type="text/javascript">
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</body>